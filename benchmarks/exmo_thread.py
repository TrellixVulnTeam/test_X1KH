import krakenex
import bitstamp.client
#import poloniex
# from poloniex import Poloniex
#import pprint, time
from datetime import datetime
import requests, json, ujson
import asyncio
import threading
from threading import Thread
import sys, time
from time import gmtime, strftime
#from aiohttp import * # ClientSession
import http.client, urllib.parse


IS_PY2 = sys.version_info < (3, 0)
if IS_PY2:
    from Queue import Queue
else:
    from queue import Queue




class Worker(Thread):
    """ Thread executing tasks from a given tasks queue """
    def __init__(self, tasks):
        Thread.__init__(self)
        self.tasks = tasks
        self.daemon = True
        self.start()

    def run(self):
        while True:
            func, args, kargs = self.tasks.get()
            try:
                func(*args, **kargs)
            except Exception as e:
                # An exception happened in this thread
                print(e)
            finally:
                # Mark this task as done, whether an exception happened or not
                self.tasks.task_done()


class ThreadPool:
    """ Pool of threads consuming tasks from a queue """
    def __init__(self, num_threads):
        self.tasks = Queue(num_threads)
        for _ in range(num_threads):
            Worker(self.tasks)

    def add_task(self, func, *args, **kargs):
        """ Add a task to the queue """
        self.tasks.put((func, args, kargs))

    def map(self, func, args_list):
        """ Add a list of tasks to the queue """
        for args in args_list:
            self.add_task(func, args)

    def wait_completion(self):
        """ Wait for completion of all the tasks in the queue """
        self.tasks.join()



def getLocalDateTime():
    return datetime.now().strftime("%H:%M:%S.%f") #strftime("%a, %d %b %Y %H:%M:%S ", gmtime())



def returnExmoOrderBook(pair):
    s = time.time()
    print('Started at %s' % getLocalDateTime())
    res = requests.get("https://api.exmo.com/v1/order_book/?pair={}".format(pair.upper()))
    #get("https://api.exmo.com/v1/order_book/?pair={}".format(pair.upper(), [])
    # await get("https://api.exmo.com/v1/order_book/?pair={}".format(pair.upper()))
    # https://api.exmo.com/v1/order_book/?pair=USDT_USD
    e = time.time()
    print('Ended at %s' % getLocalDateTime())
    print('Exmo Duration: ' + str(e - s))
    print('Exmo: ' + str(res))
    #return res


def returnKrakenOrderBook(pair, num=1):
    s = time.time()
    print('%s Started at %s' % (num, getLocalDateTime()))
    res = K.query_public('Depth', {'pair': pair.upper(), 'count': '50'})
    e = time.time()
    print('%s Ended at %s' % (num, getLocalDateTime()))
    print('%s Kraken Duration: %s' % (num, str(e - s)))
    print('%s Kraken: %s' % (num, str(res)))
    #return res


K = krakenex.API()
start = time.time()
k_pair = 'XXRPZUSD'
e_pair = 'XRP_USD'
# #t1 = threading.Thread(target=returnExmoOrderBook(e_pair))
# t1 = threading.Thread(target=returnKrakenOrderBook(k_pair))
# t2 = threading.Thread(target=returnKrakenOrderBook(k_pair))
# t1.daemon = True
# t2.daemon = True
# t1.start()
# t2.start()
# t1.join()
# t2.join()
# print('Total Duration: %ss' % (time.time() - start))

#start in 110-200ms, end  400ms (0.4-1sec)
# Started at 16:11:21.745466
# Started at 16:11:22.950466
# Kraken Duration: 1.2049999237060547
# Kraken: {'error': [], 'result': {'XXRPZUSD': {'asks': [['0.49240000', '6100.500', 1522674687], ['0.49251000', '2399.990', 1522674695], ['0.49291000', '888.630', 1522674697], ['0.49295000', '10005.185', 1522674694], ['0.49341000', '1369.837', 1522674696], ['0.49342000', '1200.000', 1522674688], ['0.49344000', '998.000', 1522674694], ['0.49346000', '4794.931', 1522674689], ['0.49350000', '8759.980', 1522674696], ['0.49351000', '22633.200', 1522674696], ['0.49375000', '33.411', 1522674664], ['0.49386000', '68.837', 1522674495], ['0.49387000', '2645.094', 1522674690], ['0.49388000', '10830.487', 1522673901], ['0.49400000', '5000.000', 1522674610], ['0.49414000', '3834.352', 1522674647], ['0.49432000', '432.437', 1522674689], ['0.49479000', '31.321', 1522674636], ['0.49484000', '37.385', 1522674532], ['0.49503000', '27000.000', 1522674587], ['0.49543000', '1430.000', 1522673963], ['0.49553000', '216330.000', 1522674548], ['0.49568000', '55225.343', 1522674654], ['0.49600000', '31.244', 1522673530], ['0.49644000', '200.000', 1522674586], ['0.49694000', '35039.910', 1522674651], ['0.49695000', '41710.967', 1522674584], ['0.49760000', '500.000', 1522674670], ['0.49774000', '30506.458', 1522674681], ['0.49775000', '79.355', 1522673738], ['0.49776000', '35.152', 1522673515], ['0.49779000', '51.225', 1522673492], ['0.49780000', '500.000', 1522672636], ['0.49877000', '5176.936', 1522670074], ['0.49900000', '132.571', 1522669945], ['0.49970000', '1000.000', 1522670640], ['0.50000000', '2348.000', 1522674012], ['0.50290000', '1000.000', 1522668612], ['0.50368000', '300.000', 1522668660], ['0.50403000', '128192.493', 1522673746], ['0.50488000', '60.000', 1522612517], ['0.50490000', '1402.590', 1522674387], ['0.50498000', '402.530', 1522674196], ['0.50500000', '2920.000', 1522673232], ['0.50502000', '402.490', 1522674146], ['0.50540000', '23742.000', 1522668929], ['0.50549000', '402.120', 1522674310], ['0.50551000', '402.100', 1522674248], ['0.50560000', '1078.955', 1522627785], ['0.50571000', '401.950', 1522674443]], 'bids': [['0.49137000', '998.000', 1522674692], ['0.49134000', '30.000', 1522674636], ['0.49090000', '81620.000', 1522674580], ['0.49062000', '13470.292', 1522674667], ['0.49040000', '6111.100', 1522674692], ['0.49017000', '2399.990', 1522674695], ['0.49012000', '8759.980', 1522674639], ['0.49011000', '27000.000', 1522674587], ['0.49008000', '7413.499', 1522674648], ['0.48932000', '699.509', 1522674689], ['0.48931000', '6366.244', 1522674531], ['0.48928000', '200.000', 1522674406], ['0.48888000', '135.809', 1522674594], ['0.48808000', '41710.967', 1522674585], ['0.48796000', '4689.512', 1522674605], ['0.48744000', '21633.000', 1522674694], ['0.48738000', '50073.205', 1522674518], ['0.48674000', '142.972', 1522674688], ['0.48623000', '15011.583', 1522674667], ['0.48622000', '200.000', 1522674583], ['0.48600000', '500.000', 1522672092], ['0.48536000', '35039.910', 1522674578], ['0.48535000', '216330.000', 1522674575], ['0.48515000', '855.000', 1522673180], ['0.48500000', '74.940', 1522673246], ['0.48392000', '512.987', 1522674678], ['0.48300000', '5701.317', 1522664828], ['0.48200000', '219.316', 1522665421], ['0.48010000', '1000.000', 1522673725], ['0.48001000', '1740.485', 1522673071], ['0.48000000', '1676.000', 1522671954], ['0.47890000', '80.000', 1522658194], ['0.47827000', '18193.899', 1522674696], ['0.47590000', '5011.000', 1522659180], ['0.47572000', '17800.000', 1522653376], ['0.47500000', '5074.500', 1522666398], ['0.47421000', '12700.000', 1522654204], ['0.47400000', '5800.000', 1522654453], ['0.47300000', '30000.000', 1522651311], ['0.47200000', '4315.000', 1522673557], ['0.47140000', '155.537', 1522651320], ['0.47100000', '1017.940', 1522651324], ['0.47010000', '4590.000', 1522651328], ['0.47000000', '6312.745', 1522673402], ['0.46900000', '105.000', 1522662390], ['0.46800000', '1000.000', 1522669730], ['0.46630000', '5000.000', 1522651343], ['0.46500000', '36160.871', 1522670828], ['0.46490000', '4302.000', 1522651350], ['0.46470000', '107.597', 1522651356]]}}}
# Started at 16:11:22.950466
# Started at 16:11:23.214466
# Kraken Duration: 0.26399993896484375
# Kraken: {'error': [], 'result': {'XXRPZUSD': {'asks': [['0.49240000', '6100.500', 1522674687], ['0.49251000', '2399.990', 1522674695], ['0.49291000', '888.630', 1522674697], ['0.49295000', '10005.185', 1522674694], ['0.49341000', '1369.837', 1522674696], ['0.49342000', '1200.000', 1522674688], ['0.49344000', '998.000', 1522674694], ['0.49346000', '4794.931', 1522674689], ['0.49350000', '8759.980', 1522674696], ['0.49351000', '22633.200', 1522674696], ['0.49375000', '33.411', 1522674664], ['0.49386000', '68.837', 1522674495], ['0.49387000', '2645.094', 1522674690], ['0.49388000', '10830.487', 1522673901], ['0.49400000', '5000.000', 1522674610], ['0.49414000', '3834.352', 1522674647], ['0.49432000', '432.437', 1522674689], ['0.49479000', '31.321', 1522674636], ['0.49484000', '37.385', 1522674532], ['0.49503000', '27000.000', 1522674587], ['0.49543000', '1430.000', 1522673963], ['0.49553000', '216330.000', 1522674548], ['0.49568000', '55225.343', 1522674654], ['0.49600000', '31.244', 1522673530], ['0.49644000', '200.000', 1522674586], ['0.49694000', '35039.910', 1522674651], ['0.49695000', '41710.967', 1522674584], ['0.49760000', '500.000', 1522674670], ['0.49774000', '30506.458', 1522674681], ['0.49775000', '79.355', 1522673738], ['0.49776000', '35.152', 1522673515], ['0.49779000', '51.225', 1522673492], ['0.49780000', '500.000', 1522672636], ['0.49877000', '5176.936', 1522670074], ['0.49900000', '132.571', 1522669945], ['0.49970000', '1000.000', 1522670640], ['0.50000000', '2348.000', 1522674012], ['0.50290000', '1000.000', 1522668612], ['0.50368000', '300.000', 1522668660], ['0.50403000', '128192.493', 1522673746], ['0.50488000', '60.000', 1522612517], ['0.50490000', '1402.590', 1522674387], ['0.50498000', '402.530', 1522674196], ['0.50500000', '2920.000', 1522673232], ['0.50502000', '402.490', 1522674146], ['0.50540000', '23742.000', 1522668929], ['0.50549000', '402.120', 1522674310], ['0.50551000', '402.100', 1522674248], ['0.50560000', '1078.955', 1522627785], ['0.50571000', '401.950', 1522674443]], 'bids': [['0.49137000', '998.000', 1522674692], ['0.49134000', '30.000', 1522674636], ['0.49090000', '81620.000', 1522674580], ['0.49062000', '13470.292', 1522674667], ['0.49040000', '6111.100', 1522674692], ['0.49017000', '2399.990', 1522674695], ['0.49012000', '8759.980', 1522674639], ['0.49011000', '27000.000', 1522674587], ['0.49008000', '7413.499', 1522674648], ['0.48932000', '699.509', 1522674689], ['0.48931000', '6366.244', 1522674531], ['0.48928000', '200.000', 1522674406], ['0.48888000', '135.809', 1522674594], ['0.48808000', '41710.967', 1522674585], ['0.48796000', '4689.512', 1522674605], ['0.48744000', '21633.000', 1522674694], ['0.48738000', '50073.205', 1522674518], ['0.48674000', '142.972', 1522674688], ['0.48623000', '15011.583', 1522674667], ['0.48622000', '200.000', 1522674583], ['0.48600000', '500.000', 1522672092], ['0.48536000', '35039.910', 1522674578], ['0.48535000', '216330.000', 1522674575], ['0.48515000', '855.000', 1522673180], ['0.48500000', '74.940', 1522673246], ['0.48392000', '512.987', 1522674678], ['0.48300000', '5701.317', 1522664828], ['0.48200000', '219.316', 1522665421], ['0.48010000', '1000.000', 1522673725], ['0.48001000', '1740.485', 1522673071], ['0.48000000', '1676.000', 1522671954], ['0.47890000', '80.000', 1522658194], ['0.47827000', '18193.899', 1522674696], ['0.47590000', '5011.000', 1522659180], ['0.47572000', '17800.000', 1522653376], ['0.47500000', '5074.500', 1522666398], ['0.47421000', '12700.000', 1522654204], ['0.47400000', '5800.000', 1522654453], ['0.47300000', '30000.000', 1522651311], ['0.47200000', '4315.000', 1522673557], ['0.47140000', '155.537', 1522651320], ['0.47100000', '1017.940', 1522651324], ['0.47010000', '4590.000', 1522651328], ['0.47000000', '6312.745', 1522673402], ['0.46900000', '105.000', 1522662390], ['0.46800000', '1000.000', 1522669730], ['0.46630000', '5000.000', 1522651343], ['0.46500000', '36160.871', 1522670828], ['0.46490000', '4302.000', 1522651350], ['0.46470000', '107.597', 1522651356]]}}}
# Total Duration: 1.4700000286102295s

print()
print('#################################Thread Loop#################################')
start = time.time()
for x in range(2):
    t1 = threading.Thread(target=returnKrakenOrderBook(k_pair, x))
    t1.start()
    #t1.join()
print('Total Duration: %ss' % (time.time() - start))

# Started at 16:40:14.603466
# Ended at 16:40:15.906466
# Kraken Duration: 1.30299973487854
# Kraken: {'error': [], 'result': {'XXRPZUSD': {'asks': [['0.49192000', '2399.990', 1522676426], ['0.49268000', '30.000', 1522676421], ['0.49279000', '3274.726', 1522676424], ['0.49280000', '6093.400', 1522676416], ['0.49290000', '1777.260', 1522676429], ['0.49294000', '3918.270', 1522676424], ['0.49295000', '7880.457', 1522676412], ['0.49321000', '12402.668', 1522676421], ['0.49322000', '2100.963', 1522676410], ['0.49399000', '39.472', 1522676290], ['0.49400000', '212.945', 1522675707], ['0.49412000', '67.795', 1522676119], ['0.49413000', '33.391', 1522675976], ['0.49414000', '3571.569', 1522674706], ['0.49449000', '272.159', 1522676401], ['0.49462000', '8759.980', 1522676426], ['0.49463000', '27000.000', 1522676418], ['0.49465000', '21633.000', 1522676403], ['0.49466000', '453.519', 1522676385], ['0.49479000', '31.321', 1522674636], ['0.49484000', '37.385', 1522674532], ['0.49543000', '1430.000', 1522674828], ['0.49566000', '47111.272', 1522676186], ['0.49590000', '800.000', 1522676357], ['0.49601000', '216330.000', 1522676209], ['0.49664000', '35039.910', 1522676422], ['0.49665000', '41710.967', 1522676026], ['0.49680000', '500.000', 1522676040], ['0.49742000', '200.000', 1522675537], ['0.49876000', '30506.458', 1522676425], ['0.49877000', '5176.936', 1522670074], ['0.49900000', '132.571', 1522669945], ['0.49970000', '1000.000', 1522670640], ['0.50000000', '2348.000', 1522674012], ['0.50290000', '1000.000', 1522668612], ['0.50300000', '2299.784', 1522675970], ['0.50368000', '300.000', 1522668660], ['0.50403000', '128192.493', 1522673746], ['0.50488000', '60.000', 1522612517], ['0.50490000', '1000.000', 1522675568], ['0.50500000', '32920.000', 1522676000], ['0.50540000', '23742.000', 1522668929], ['0.50560000', '1078.955', 1522627785], ['0.50715000', '400.800', 1522676297], ['0.50717000', '801.580', 1522676114], ['0.50736000', '400.640', 1522676000], ['0.50737000', '400.630', 1522675871], ['0.50738000', '400.620', 1522676169], ['0.50740000', '275.000', 1522668386], ['0.50751000', '400.520', 1522675946]], 'bids': [['0.49139000', '6292.605', 1522676421], ['0.49101000', '888.630', 1522676429], ['0.49098000', '1911.000', 1522676407], ['0.49097000', '8870.285', 1522676413], ['0.49023000', '660.002', 1522676428], ['0.49022000', '325.908', 1522676422], ['0.48998000', '27000.000', 1522676412], ['0.48994000', '200.000', 1522676348], ['0.48990000', '2399.990', 1522676426], ['0.48901000', '8759.980', 1522676426], ['0.48900000', '81938.000', 1522676233], ['0.48895000', '5023.093', 1522676414], ['0.48838000', '57924.230', 1522676216], ['0.48812000', '200.000', 1522676308], ['0.48801000', '41710.967', 1522676411], ['0.48696000', '21633.000', 1522676427], ['0.48695000', '15015.555', 1522676415], ['0.48600000', '500.000', 1522672092], ['0.48515000', '855.000', 1522673180], ['0.48500000', '74.940', 1522673246], ['0.48481000', '35039.910', 1522676201], ['0.48480000', '216330.000', 1522676197], ['0.48300000', '5701.317', 1522675128], ['0.48200000', '219.316', 1522665421], ['0.48010000', '1000.000', 1522673725], ['0.48001000', '1740.485', 1522673071], ['0.48000000', '1676.000', 1522671954], ['0.47890000', '80.000', 1522658194], ['0.47590000', '5011.000', 1522659180], ['0.47572000', '17800.000', 1522653376], ['0.47500000', '5074.500', 1522666398], ['0.47421000', '12700.000', 1522654204], ['0.47400000', '5800.000', 1522654453], ['0.47200000', '4315.000', 1522673557], ['0.47140000', '155.537', 1522651320], ['0.47100000', '1017.940', 1522651324], ['0.47010000', '4590.000', 1522651328], ['0.47000000', '6312.745', 1522673402], ['0.46900000', '105.000', 1522662390], ['0.46800000', '1000.000', 1522669730], ['0.46630000', '5000.000', 1522651343], ['0.46500000', '36160.871', 1522670828], ['0.46470000', '107.597', 1522651356], ['0.46300000', '64.795', 1522651371], ['0.46200000', '111912.555', 1522673712], ['0.46100000', '555.708', 1522651383], ['0.46000000', '36159.858', 1522667141], ['0.45800000', '762.000', 1522606241], ['0.45750000', '5901.640', 1522660880], ['0.45700000', '6159.000', 1522666396]]}}}
# Started at 16:40:15.906466
# Ended at 16:40:16.340466
# Kraken Duration: 0.43400025367736816
# Kraken: {'error': [], 'result': {'XXRPZUSD': {'asks': [['0.49268000', '30.000', 1522676421], ['0.49279000', '3274.726', 1522676424], ['0.49280000', '6093.400', 1522676416], ['0.49290000', '1777.260', 1522676429], ['0.49294000', '3918.270', 1522676424], ['0.49295000', '7880.457', 1522676412], ['0.49321000', '12402.668', 1522676421], ['0.49322000', '2100.963', 1522676410], ['0.49399000', '39.472', 1522676290], ['0.49400000', '212.945', 1522675707], ['0.49412000', '67.795', 1522676119], ['0.49413000', '33.391', 1522675976], ['0.49414000', '3571.569', 1522674706], ['0.49449000', '272.159', 1522676401], ['0.49462000', '8759.980', 1522676426], ['0.49463000', '27000.000', 1522676418], ['0.49465000', '21633.000', 1522676403], ['0.49466000', '453.519', 1522676385], ['0.49479000', '31.321', 1522674636], ['0.49484000', '37.385', 1522674532], ['0.49543000', '1430.000', 1522674828], ['0.49562000', '777.000', 1522676430], ['0.49566000', '47111.272', 1522676186], ['0.49590000', '800.000', 1522676357], ['0.49601000', '216330.000', 1522676209], ['0.49664000', '35039.910', 1522676422], ['0.49665000', '41710.967', 1522676026], ['0.49680000', '500.000', 1522676040], ['0.49742000', '200.000', 1522675537], ['0.49876000', '30506.458', 1522676425], ['0.49877000', '5176.936', 1522670074], ['0.49900000', '132.571', 1522669945], ['0.49970000', '1000.000', 1522670640], ['0.50000000', '2348.000', 1522674012], ['0.50290000', '1000.000', 1522668612], ['0.50300000', '2299.784', 1522675970], ['0.50368000', '300.000', 1522668660], ['0.50403000', '128192.493', 1522673746], ['0.50488000', '60.000', 1522612517], ['0.50490000', '1000.000', 1522675568], ['0.50500000', '32920.000', 1522676000], ['0.50540000', '23742.000', 1522668929], ['0.50560000', '1078.955', 1522627785], ['0.50715000', '400.800', 1522676297], ['0.50717000', '801.580', 1522676114], ['0.50736000', '400.640', 1522676000], ['0.50737000', '400.630', 1522675871], ['0.50738000', '400.620', 1522676169], ['0.50740000', '275.000', 1522668386], ['0.50751000', '400.520', 1522675946]], 'bids': [['0.49139000', '6292.605', 1522676421], ['0.49101000', '888.630', 1522676429], ['0.49098000', '1911.000', 1522676407], ['0.49097000', '8870.285', 1522676413], ['0.49023000', '660.002', 1522676428], ['0.49022000', '325.908', 1522676422], ['0.48998000', '27000.000', 1522676412], ['0.48994000', '200.000', 1522676348], ['0.48901000', '8759.980', 1522676426], ['0.48900000', '81938.000', 1522676233], ['0.48895000', '5023.093', 1522676414], ['0.48838000', '57924.230', 1522676216], ['0.48812000', '200.000', 1522676308], ['0.48801000', '41710.967', 1522676411], ['0.48696000', '21633.000', 1522676427], ['0.48695000', '15015.555', 1522676415], ['0.48600000', '500.000', 1522672092], ['0.48515000', '855.000', 1522673180], ['0.48500000', '74.940', 1522673246], ['0.48481000', '35039.910', 1522676201], ['0.48480000', '216330.000', 1522676197], ['0.48300000', '5701.317', 1522675128], ['0.48200000', '219.316', 1522665421], ['0.48010000', '1000.000', 1522673725], ['0.48001000', '1740.485', 1522673071], ['0.48000000', '1676.000', 1522671954], ['0.47890000', '80.000', 1522658194], ['0.47827000', '16083.796', 1522676430], ['0.47590000', '5011.000', 1522659180], ['0.47572000', '17800.000', 1522653376], ['0.47500000', '5074.500', 1522666398], ['0.47421000', '12700.000', 1522654204], ['0.47400000', '5800.000', 1522654453], ['0.47200000', '4315.000', 1522673557], ['0.47140000', '155.537', 1522651320], ['0.47100000', '1017.940', 1522651324], ['0.47010000', '4590.000', 1522651328], ['0.47000000', '6312.745', 1522673402], ['0.46900000', '105.000', 1522662390], ['0.46800000', '1000.000', 1522669730], ['0.46630000', '5000.000', 1522651343], ['0.46500000', '36160.871', 1522670828], ['0.46470000', '107.597', 1522651356], ['0.46300000', '64.795', 1522651371], ['0.46200000', '111912.555', 1522673712], ['0.46100000', '555.708', 1522651383], ['0.46000000', '36159.858', 1522667141], ['0.45800000', '762.000', 1522606241], ['0.45750000', '5901.640', 1522660880], ['0.45700000', '6159.000', 1522666396]]}}}
# Total Duration: 1.7379999160766602s
#
# #################################Loop#################################
# Started at 16:40:16.344466
# Ended at 16:40:16.744466
# Kraken Duration: 0.40000009536743164
# Kraken: {'error': [], 'result': {'XXRPZUSD': {'asks': [['0.49268000', '30.000', 1522676421], ['0.49279000', '3274.726', 1522676424], ['0.49280000', '6093.400', 1522676416], ['0.49290000', '1777.260', 1522676429], ['0.49294000', '3918.270', 1522676424], ['0.49295000', '7880.457', 1522676412], ['0.49321000', '12402.668', 1522676421], ['0.49322000', '2100.963', 1522676410], ['0.49399000', '39.472', 1522676290], ['0.49400000', '212.945', 1522675707], ['0.49412000', '67.795', 1522676119], ['0.49413000', '33.391', 1522675976], ['0.49414000', '3571.569', 1522674706], ['0.49449000', '272.159', 1522676401], ['0.49462000', '8759.980', 1522676426], ['0.49463000', '27000.000', 1522676418], ['0.49465000', '21633.000', 1522676403], ['0.49466000', '453.519', 1522676385], ['0.49479000', '31.321', 1522674636], ['0.49484000', '37.385', 1522674532], ['0.49543000', '1430.000', 1522674828], ['0.49562000', '777.000', 1522676430], ['0.49566000', '47111.272', 1522676186], ['0.49590000', '800.000', 1522676357], ['0.49601000', '216330.000', 1522676209], ['0.49664000', '35039.910', 1522676422], ['0.49665000', '41710.967', 1522676026], ['0.49680000', '500.000', 1522676040], ['0.49742000', '200.000', 1522675537], ['0.49876000', '30506.458', 1522676425], ['0.49877000', '5176.936', 1522670074], ['0.49900000', '132.571', 1522669945], ['0.49970000', '1000.000', 1522670640], ['0.50000000', '2348.000', 1522674012], ['0.50290000', '1000.000', 1522668612], ['0.50300000', '2299.784', 1522675970], ['0.50368000', '300.000', 1522668660], ['0.50403000', '128192.493', 1522673746], ['0.50488000', '60.000', 1522612517], ['0.50490000', '1000.000', 1522675568], ['0.50500000', '32920.000', 1522676000], ['0.50540000', '23742.000', 1522668929], ['0.50560000', '1078.955', 1522627785], ['0.50715000', '400.800', 1522676297], ['0.50717000', '801.580', 1522676114], ['0.50736000', '400.640', 1522676000], ['0.50737000', '400.630', 1522675871], ['0.50738000', '400.620', 1522676169], ['0.50740000', '275.000', 1522668386], ['0.50751000', '400.520', 1522675946]], 'bids': [['0.49139000', '6292.605', 1522676421], ['0.49101000', '888.630', 1522676429], ['0.49098000', '1911.000', 1522676407], ['0.49097000', '8870.285', 1522676413], ['0.49023000', '660.002', 1522676428], ['0.49022000', '325.908', 1522676422], ['0.48998000', '27000.000', 1522676412], ['0.48994000', '200.000', 1522676348], ['0.48983000', '2399.990', 1522676431], ['0.48901000', '8759.980', 1522676426], ['0.48900000', '81938.000', 1522676233], ['0.48895000', '5023.093', 1522676414], ['0.48838000', '57924.230', 1522676216], ['0.48812000', '200.000', 1522676308], ['0.48801000', '41710.967', 1522676411], ['0.48696000', '21633.000', 1522676427], ['0.48695000', '15015.555', 1522676415], ['0.48600000', '500.000', 1522672092], ['0.48515000', '855.000', 1522673180], ['0.48500000', '74.940', 1522673246], ['0.48481000', '35039.910', 1522676201], ['0.48480000', '216330.000', 1522676197], ['0.48300000', '5701.317', 1522675128], ['0.48200000', '219.316', 1522665421], ['0.48010000', '1000.000', 1522673725], ['0.48001000', '1740.485', 1522673071], ['0.48000000', '1676.000', 1522671954], ['0.47890000', '80.000', 1522658194], ['0.47827000', '16083.796', 1522676430], ['0.47590000', '5011.000', 1522659180], ['0.47572000', '17800.000', 1522653376], ['0.47500000', '5074.500', 1522666398], ['0.47421000', '12700.000', 1522654204], ['0.47400000', '5800.000', 1522654453], ['0.47200000', '4315.000', 1522673557], ['0.47140000', '155.537', 1522651320], ['0.47100000', '1017.940', 1522651324], ['0.47010000', '4590.000', 1522651328], ['0.47000000', '6312.745', 1522673402], ['0.46900000', '105.000', 1522662390], ['0.46800000', '1000.000', 1522669730], ['0.46630000', '5000.000', 1522651343], ['0.46500000', '36160.871', 1522670828], ['0.46470000', '107.597', 1522651356], ['0.46300000', '64.795', 1522651371], ['0.46200000', '111912.555', 1522673712], ['0.46100000', '555.708', 1522651383], ['0.46000000', '36159.858', 1522667141], ['0.45800000', '762.000', 1522606241], ['0.45750000', '5901.640', 1522660880]]}}}
# Started at 16:40:16.745466
# Ended at 16:40:17.983466
# Kraken Duration: 1.2380001544952393
# Kraken: {'error': [], 'result': {'XXRPZUSD': {'asks': [['0.49192000', '2399.990', 1522676426], ['0.49268000', '30.000', 1522676421], ['0.49279000', '3274.726', 1522676424], ['0.49280000', '6093.400', 1522676416], ['0.49290000', '1777.260', 1522676429], ['0.49294000', '3918.270', 1522676424], ['0.49295000', '7880.457', 1522676412], ['0.49321000', '12402.668', 1522676421], ['0.49322000', '2100.963', 1522676410], ['0.49399000', '39.472', 1522676290], ['0.49400000', '212.945', 1522675707], ['0.49412000', '67.795', 1522676119], ['0.49413000', '33.391', 1522675976], ['0.49414000', '3571.569', 1522674706], ['0.49449000', '272.159', 1522676401], ['0.49462000', '8759.980', 1522676426], ['0.49463000', '27000.000', 1522676418], ['0.49465000', '21633.000', 1522676403], ['0.49466000', '453.519', 1522676385], ['0.49479000', '31.321', 1522674636], ['0.49484000', '37.385', 1522674532], ['0.49543000', '1430.000', 1522674828], ['0.49566000', '47111.272', 1522676186], ['0.49590000', '800.000', 1522676357], ['0.49601000', '216330.000', 1522676209], ['0.49664000', '35039.910', 1522676422], ['0.49665000', '41710.967', 1522676026], ['0.49680000', '500.000', 1522676040], ['0.49742000', '200.000', 1522675537], ['0.49876000', '30506.458', 1522676425], ['0.49877000', '5176.936', 1522670074], ['0.49900000', '132.571', 1522669945], ['0.49970000', '1000.000', 1522670640], ['0.50000000', '2348.000', 1522674012], ['0.50290000', '1000.000', 1522668612], ['0.50300000', '2299.784', 1522675970], ['0.50368000', '300.000', 1522668660], ['0.50403000', '128192.493', 1522673746], ['0.50488000', '60.000', 1522612517], ['0.50490000', '1000.000', 1522675568], ['0.50500000', '32920.000', 1522676000], ['0.50540000', '23742.000', 1522668929], ['0.50560000', '1078.955', 1522627785], ['0.50715000', '400.800', 1522676297], ['0.50717000', '801.580', 1522676114], ['0.50736000', '400.640', 1522676000], ['0.50737000', '400.630', 1522675871], ['0.50738000', '400.620', 1522676169], ['0.50740000', '275.000', 1522668386], ['0.50751000', '400.520', 1522675946]], 'bids': [['0.49139000', '6292.605', 1522676421], ['0.49101000', '888.630', 1522676429], ['0.49098000', '1911.000', 1522676407], ['0.49097000', '8870.285', 1522676413], ['0.49023000', '660.002', 1522676428], ['0.49022000', '325.908', 1522676422], ['0.48998000', '27000.000', 1522676412], ['0.48994000', '200.000', 1522676348], ['0.48990000', '2399.990', 1522676426], ['0.48901000', '8759.980', 1522676426], ['0.48900000', '81938.000', 1522676233], ['0.48895000', '5023.093', 1522676414], ['0.48838000', '57924.230', 1522676216], ['0.48812000', '200.000', 1522676308], ['0.48801000', '41710.967', 1522676411], ['0.48696000', '21633.000', 1522676427], ['0.48695000', '15015.555', 1522676415], ['0.48600000', '500.000', 1522672092], ['0.48515000', '855.000', 1522673180], ['0.48500000', '74.940', 1522673246], ['0.48481000', '35039.910', 1522676201], ['0.48480000', '216330.000', 1522676197], ['0.48300000', '5701.317', 1522675128], ['0.48200000', '219.316', 1522665421], ['0.48010000', '1000.000', 1522673725], ['0.48001000', '1740.485', 1522673071], ['0.48000000', '1676.000', 1522671954], ['0.47890000', '80.000', 1522658194], ['0.47827000', '13987.262', 1522676425], ['0.47590000', '5011.000', 1522659180], ['0.47572000', '17800.000', 1522653376], ['0.47500000', '5074.500', 1522666398], ['0.47421000', '12700.000', 1522654204], ['0.47400000', '5800.000', 1522654453], ['0.47200000', '4315.000', 1522673557], ['0.47140000', '155.537', 1522651320], ['0.47100000', '1017.940', 1522651324], ['0.47010000', '4590.000', 1522651328], ['0.47000000', '6312.745', 1522673402], ['0.46900000', '105.000', 1522662390], ['0.46800000', '1000.000', 1522669730], ['0.46630000', '5000.000', 1522651343], ['0.46500000', '36160.871', 1522670828], ['0.46470000', '107.597', 1522651356], ['0.46300000', '64.795', 1522651371], ['0.46200000', '111912.555', 1522673712], ['0.46100000', '555.708', 1522651383], ['0.46000000', '36159.858', 1522667141], ['0.45800000', '762.000', 1522606241], ['0.45750000', '5901.640', 1522660880]]}}}
# Total Duration: 1.6390001773834229s



async def returnExmoOrderBook2(pair):
    s = time.time()
    print('Started at %s' % getLocalDateTime())
    res = requests.get("https://api.exmo.com/v1/order_book/?pair={}".format(pair.upper()))
    #get("https://api.exmo.com/v1/order_book/?pair={}".format(pair.upper(), [])
    # await get("https://api.exmo.com/v1/order_book/?pair={}".format(pair.upper()))
    # https://api.exmo.com/v1/order_book/?pair=USDT_USD
    e = time.time()
    print('Ended at %s' % getLocalDateTime())
    print('Exmo Duration: ' + str(e - s))
    print('Exmo: ' + str(res))
    #return res


async def returnKrakenOrderBook2(pair, num=1):
    s = time.time()
    print('%s Started at %s' % (num, getLocalDateTime()))
    res = K.query_public('Depth', {'pair': pair.upper(), 'count': '50'})
    e = time.time()
    print('%s Ended at %s' % (num, getLocalDateTime()))
    print('%s Kraken Duration: %s' % (num, str(e - s)))
    print('%s Kraken res: %s' % (num, str(res)))
    #return res


#
print()
print('#################################Async Loop#################################')
#future = asyncio.Future()
loop = asyncio.get_event_loop()
tasks= []
tasks.append(returnKrakenOrderBook2(k_pair, 1))
tasks.append(returnKrakenOrderBook2(k_pair, 2))
loop.run_until_complete(asyncio.gather(*tasks))
loop.close()

#270ms start, 270ms end
#################################Async Loop#################################
# Started at 16:54:46.066466
# Ended at 16:54:46.331466
# Kraken Duration: 0.2650001049041748
# Kraken: {'error': [], 'result': {'XXRPZUSD': {'asks': [['0.49099000', '12931.107', 1522677300], ['0.49100000', '5863.855', 1522677291], ['0.49141000', '4172.539', 1522677298], ['0.49145000', '4395.990', 1522677300], ['0.49150000', '2945.400', 1522677298], ['0.49151000', '12289.216', 1522677219], ['0.49217000', '10937.553', 1522677178], ['0.49260000', '900.000', 1522677006], ['0.49283000', '8759.980', 1522677099], ['0.49284000', '27000.000', 1522677053], ['0.49299000', '474.557', 1522677294], ['0.49304000', '290.309', 1522677248], ['0.49308000', '39.545', 1522677036], ['0.49360000', '1100.000', 1522677294], ['0.49372000', '64884.819', 1522677218], ['0.49397000', '39.470', 1522677093], ['0.49399000', '39.472', 1522676290], ['0.49400000', '212.945', 1522675707], ['0.49408000', '21633.000', 1522677278], ['0.49412000', '67.795', 1522676778], ['0.49413000', '33.391', 1522677055], ['0.49414000', '3571.569', 1522674706], ['0.49470000', '2307.900', 1522677301], ['0.49479000', '31.321', 1522677104], ['0.49484000', '37.385', 1522677250], ['0.49513000', '33.324', 1522677229], ['0.49514000', '35.342', 1522677204], ['0.49515000', '41710.967', 1522677054], ['0.49543000', '1430.000', 1522674828], ['0.49593000', '216330.000', 1522677059], ['0.49679000', '30506.458', 1522677134], ['0.49680000', '500.000', 1522676040], ['0.49748000', '200.000', 1522677201], ['0.49844000', '54.672', 1522677281], ['0.49877000', '5176.936', 1522670074], ['0.49900000', '132.571', 1522669945], ['0.49970000', '1000.000', 1522670640], ['0.50000000', '2378.000', 1522677164], ['0.50290000', '1000.000', 1522668612], ['0.50300000', '2299.784', 1522675970], ['0.50368000', '300.000', 1522668660], ['0.50406000', '128192.493', 1522677209], ['0.50469000', '805.520', 1522677008], ['0.50470000', '402.750', 1522676889], ['0.50488000', '60.000', 1522612517], ['0.50490000', '1000.000', 1522675568], ['0.50500000', '32920.000', 1522676000], ['0.50506000', '402.460', 1522676629], ['0.50526000', '402.310', 1522677071], ['0.50531000', '402.260', 1522676696]], 'bids': [['0.49001000', '88.656', 1522677299], ['0.48999000', '2399.990', 1522677300], ['0.48994000', '200.000', 1522677221], ['0.48961000', '998.000', 1522677301], ['0.48960000', '3054.925', 1522677300], ['0.48959000', '46906.849', 1522677297], ['0.48945000', '8263.785', 1522677217], ['0.48819000', '8759.980', 1522677058], ['0.48818000', '27000.000', 1522677053], ['0.48794000', '300.051', 1522677251], ['0.48785000', '5050.111', 1522677058], ['0.48724000', '43291.846', 1522677215], ['0.48631000', '200.000', 1522677133], ['0.48616000', '143.115', 1522677297], ['0.48601000', '15051.094', 1522677133], ['0.48600000', '500.000', 1522672092], ['0.48597000', '41710.967', 1522677053], ['0.48516000', '21633.000', 1522677288], ['0.48515000', '855.000', 1522677131], ['0.48500000', '35114.850', 1522677301], ['0.48499000', '216330.000', 1522677166], ['0.48300000', '5701.317', 1522675128], ['0.48286000', '411.294', 1522677244], ['0.48200000', '219.316', 1522665421], ['0.48010000', '1000.000', 1522673725], ['0.48001000', '1740.485', 1522673071], ['0.48000000', '1676.000', 1522671954], ['0.47890000', '80.000', 1522658194], ['0.47787000', '16683.948', 1522677297], ['0.47590000', '5011.000', 1522659180], ['0.47572000', '17800.000', 1522653376], ['0.47500000', '5074.500', 1522666398], ['0.47421000', '12700.000', 1522654204], ['0.47400000', '14800.000', 1522676896], ['0.47200000', '4315.000', 1522673557], ['0.47140000', '155.537', 1522651320], ['0.47100000', '1017.940', 1522651324], ['0.47010000', '4590.000', 1522651328], ['0.47000000', '8360.830', 1522677297], ['0.46900000', '105.000', 1522662390], ['0.46800000', '1000.000', 1522669730], ['0.46630000', '5000.000', 1522651343], ['0.46500000', '36160.871', 1522670828], ['0.46470000', '107.597', 1522651356], ['0.46300000', '64.795', 1522651371], ['0.46200000', '111912.555', 1522673712], ['0.46100000', '555.708', 1522651383], ['0.46000000', '35088.988', 1522677243], ['0.45800000', '762.000', 1522606241], ['0.45750000', '5901.640', 1522660880]]}}}
# Started at 16:54:46.331466
# Ended at 16:54:46.605466
# Kraken Duration: 0.2739999294281006
# Kraken: {'error': [], 'result': {'XXRPZUSD': {'asks': [['0.49099000', '12931.107', 1522677300], ['0.49100000', '5863.855', 1522677291], ['0.49141000', '4172.539', 1522677298], ['0.49145000', '4395.990', 1522677300], ['0.49150000', '2945.400', 1522677298], ['0.49151000', '12289.216', 1522677219], ['0.49217000', '10937.553', 1522677178], ['0.49260000', '900.000', 1522677006], ['0.49283000', '8759.980', 1522677099], ['0.49284000', '27000.000', 1522677053], ['0.49299000', '474.557', 1522677294], ['0.49304000', '290.309', 1522677248], ['0.49308000', '39.545', 1522677036], ['0.49360000', '1100.000', 1522677294], ['0.49372000', '64884.819', 1522677218], ['0.49397000', '39.470', 1522677093], ['0.49399000', '39.472', 1522676290], ['0.49400000', '212.945', 1522675707], ['0.49408000', '21633.000', 1522677278], ['0.49412000', '67.795', 1522676778], ['0.49413000', '33.391', 1522677055], ['0.49414000', '3571.569', 1522674706], ['0.49470000', '2307.900', 1522677301], ['0.49479000', '31.321', 1522677104], ['0.49484000', '37.385', 1522677250], ['0.49513000', '33.324', 1522677229], ['0.49514000', '35.342', 1522677204], ['0.49515000', '41710.967', 1522677054], ['0.49543000', '1430.000', 1522674828], ['0.49593000', '216330.000', 1522677059], ['0.49679000', '30506.458', 1522677134], ['0.49680000', '500.000', 1522676040], ['0.49748000', '200.000', 1522677201], ['0.49844000', '54.672', 1522677281], ['0.49877000', '5176.936', 1522670074], ['0.49900000', '132.571', 1522669945], ['0.49970000', '1000.000', 1522670640], ['0.50000000', '2378.000', 1522677164], ['0.50290000', '1000.000', 1522668612], ['0.50300000', '2299.784', 1522675970], ['0.50368000', '300.000', 1522668660], ['0.50406000', '128192.493', 1522677209], ['0.50469000', '805.520', 1522677008], ['0.50470000', '402.750', 1522676889], ['0.50488000', '60.000', 1522612517], ['0.50490000', '1000.000', 1522675568], ['0.50500000', '32920.000', 1522676000], ['0.50506000', '402.460', 1522676629], ['0.50526000', '402.310', 1522677071], ['0.50531000', '402.260', 1522676696]], 'bids': [['0.49001000', '88.656', 1522677299], ['0.48999000', '2399.990', 1522677300], ['0.48994000', '200.000', 1522677221], ['0.48961000', '998.000', 1522677301], ['0.48960000', '3054.925', 1522677300], ['0.48959000', '46906.849', 1522677297], ['0.48945000', '8263.785', 1522677217], ['0.48819000', '8759.980', 1522677058], ['0.48818000', '27000.000', 1522677053], ['0.48794000', '300.051', 1522677251], ['0.48785000', '5050.111', 1522677058], ['0.48724000', '43291.846', 1522677215], ['0.48631000', '200.000', 1522677133], ['0.48616000', '143.115', 1522677297], ['0.48601000', '15051.094', 1522677133], ['0.48600000', '500.000', 1522672092], ['0.48597000', '41710.967', 1522677053], ['0.48516000', '21633.000', 1522677288], ['0.48515000', '855.000', 1522677131], ['0.48500000', '35114.850', 1522677301], ['0.48499000', '216330.000', 1522677166], ['0.48300000', '5701.317', 1522675128], ['0.48286000', '411.294', 1522677244], ['0.48200000', '219.316', 1522665421], ['0.48010000', '1000.000', 1522673725], ['0.48001000', '1740.485', 1522673071], ['0.48000000', '1676.000', 1522671954], ['0.47890000', '80.000', 1522658194], ['0.47787000', '16683.948', 1522677297], ['0.47590000', '5011.000', 1522659180], ['0.47572000', '17800.000', 1522653376], ['0.47500000', '5074.500', 1522666398], ['0.47421000', '12700.000', 1522654204], ['0.47400000', '14800.000', 1522676896], ['0.47200000', '4315.000', 1522673557], ['0.47140000', '155.537', 1522651320], ['0.47100000', '1017.940', 1522651324], ['0.47010000', '4590.000', 1522651328], ['0.47000000', '8360.830', 1522677297], ['0.46900000', '105.000', 1522662390], ['0.46800000', '1000.000', 1522669730], ['0.46630000', '5000.000', 1522651343], ['0.46500000', '36160.871', 1522670828], ['0.46470000', '107.597', 1522651356], ['0.46300000', '64.795', 1522651371], ['0.46200000', '111912.555', 1522673712], ['0.46100000', '555.708', 1522651383], ['0.46000000', '35088.988', 1522677243], ['0.45800000', '762.000', 1522606241], ['0.45750000', '5901.640', 1522660880]]}}}



async def returnExmoOrderBook3(pair):
    s = time.time()
    print('Started at %s' % getLocalDateTime())
    res = await requests.get("https://api.exmo.com/v1/order_book/?pair={}".format(pair.upper()))
    #get("https://api.exmo.com/v1/order_book/?pair={}".format(pair.upper(), [])
    # await get("https://api.exmo.com/v1/order_book/?pair={}".format(pair.upper()))
    # https://api.exmo.com/v1/order_book/?pair=USDT_USD
    e = time.time()
    print('Ended at %s' % getLocalDateTime())
    print('Exmo Duration: ' + str(e - s))
    print('Exmo: ' + str(res))
    #return res


async def returnKrakenOrderBook3(pair):
    s = time.time()
    print('3 Started at %s' % getLocalDateTime())
    res = await K.query_public('Depth', {'pair': pair.upper(), 'count': '50'})
    e = time.time()
    print('3 Ended at %s' % getLocalDateTime())
    print('3 Kraken Duration: ' + str(e - s))
    print('3 Kraken: ' + str(res))
    #return res



print()
print('#################################Async Await Loop#################################')
# future = asyncio.Future()
# loop = asyncio.get_event_loop()
# tasks= []
# tasks.append(returnKrakenOrderBook3(k_pair))
# tasks.append(returnKrakenOrderBook3(k_pair))
# asyncio.ensure_future(asyncio.gather(*tasks))
# #loop.run_forever()
# loop.run_until_complete()
# loop.close()

print('#################################MULTIPROCESSING#################################')
# from multiprocessing import Process
# p1 = Process(target=returnKrakenOrderBook(k_pair, 1))
# p1.start()
# p2 = Process(target=returnKrakenOrderBook(k_pair, 2))
# p2.start()
# p1.join()
# p2.join()


# from multiprocessing import Pool
# from poolable import make_applicable, make_mappable
# def cube(x):
#   return x**3
#
# if __name__ == "__main__":
#   pool    = Pool(processes=2)
#   results = [pool.apply_async(*make_applicable(cube,x)) for x in range(1,7)]
#   print([result.get(timeout=10) for result in results])

#start 300ms , end 600ms
#################################Async Loop#################################
# Started at 17:01:39.641466
# Ended at 17:01:39.932466
# Kraken Duration: 0.2910001277923584
# Kraken: {'error': [], 'result': {'XXRPZUSD': {'asks': [['0.49040000', '6126.300', 1522677710], ['0.49059000', '2100.963', 1522677703], ['0.49073000', '1996.000', 1522677712], ['0.49075000', '10513.886', 1522677700], ['0.49150000', '8759.980', 1522677703], ['0.49151000', '20211.394', 1522677700], ['0.49168000', '2010.000', 1522677658], ['0.49198000', '21633.000', 1522677702], ['0.49199000', '27000.000', 1522677669], ['0.49248000', '1100.000', 1522677713], ['0.49274000', '295.164', 1522677671], ['0.49296000', '55449.292', 1522677702], ['0.49330000', '900.000', 1522677610], ['0.49332000', '480.167', 1522677660], ['0.49397000', '39.470', 1522677093], ['0.49400000', '212.945', 1522677441], ['0.49414000', '3571.569', 1522674706], ['0.49432000', '41710.967', 1522677658], ['0.49435000', '216330.000', 1522677699], ['0.49512000', '30506.458', 1522677710], ['0.49513000', '33.324', 1522677229], ['0.49514000', '35.342', 1522677664], ['0.49543000', '1430.000', 1522674828], ['0.49574000', '200.000', 1522677642], ['0.49678000', '55.352', 1522677337], ['0.49679000', '39.246', 1522677689], ['0.49680000', '500.000', 1522676040], ['0.49746000', '33.167', 1522677489], ['0.49748000', '31.152', 1522677616], ['0.49841000', '39.122', 1522677673], ['0.49842000', '49.151', 1522677646], ['0.49843000', '33.103', 1522677631], ['0.49844000', '54.672', 1522677281], ['0.49877000', '5176.936', 1522670074], ['0.49900000', '132.571', 1522669945], ['0.49970000', '1000.000', 1522670640], ['0.50000000', '2378.000', 1522677164], ['0.50120000', '128192.493', 1522677703], ['0.50290000', '1000.000', 1522668612], ['0.50300000', '2299.784', 1522675970], ['0.50368000', '300.000', 1522668660], ['0.50469000', '805.520', 1522677008], ['0.50470000', '402.750', 1522676889], ['0.50488000', '60.000', 1522612517], ['0.50490000', '1000.000', 1522675568], ['0.50500000', '32920.000', 1522676000], ['0.50506000', '402.460', 1522676629], ['0.50526000', '402.310', 1522677071], ['0.50531000', '402.260', 1522676696], ['0.50540000', '23742.000', 1522668929]], 'bids': [['0.48994000', '200.000', 1522677511], ['0.48934000', '998.000', 1522677710], ['0.48933000', '2754.693', 1522677715], ['0.48932000', '13016.948', 1522677698], ['0.48881000', '2399.990', 1522677714], ['0.48860000', '18992.114', 1522677691], ['0.48814000', '1001.100', 1522677704], ['0.48806000', '5047.938', 1522677660], ['0.48743000', '200.000', 1522677307], ['0.48712000', '8759.980', 1522677704], ['0.48711000', '49088.545', 1522677706], ['0.48709000', '27000.000', 1522677669], ['0.48700000', '4167.360', 1522677350], ['0.48601000', '21633.000', 1522677691], ['0.48600000', '500.000', 1522672092], ['0.48567000', '41710.967', 1522677658], ['0.48515000', '855.000', 1522677131], ['0.48500000', '74.940', 1522677537], ['0.48308000', '35039.910', 1522677710], ['0.48307000', '216330.000', 1522677696], ['0.48301000', '15056.317', 1522677699], ['0.48300000', '5701.317', 1522675128], ['0.48285000', '514.131', 1522677705], ['0.48200000', '219.316', 1522665421], ['0.48010000', '1000.000', 1522673725], ['0.48001000', '1740.485', 1522673071], ['0.48000000', '1676.000', 1522671954], ['0.47890000', '80.000', 1522658194], ['0.47787000', '16315.957', 1522677714], ['0.47590000', '5011.000', 1522659180], ['0.47572000', '17800.000', 1522653376], ['0.47500000', '5074.500', 1522666398], ['0.47421000', '12700.000', 1522654204], ['0.47400000', '14800.000', 1522676896], ['0.47200000', '4315.000', 1522673557], ['0.47140000', '155.537', 1522651320], ['0.47100000', '1017.940', 1522651324], ['0.47010000', '4590.000', 1522651328], ['0.47000000', '8360.830', 1522677297], ['0.46900000', '105.000', 1522662390], ['0.46800000', '1000.000', 1522669730], ['0.46630000', '5000.000', 1522651343], ['0.46500000', '36160.871', 1522670828], ['0.46470000', '107.597', 1522651356], ['0.46300000', '64.795', 1522651371], ['0.46200000', '111912.555', 1522673712], ['0.46100000', '555.708', 1522651383], ['0.46000000', '35088.988', 1522677243], ['0.45800000', '762.000', 1522606241], ['0.45750000', '5901.640', 1522660880]]}}}
# Started at 17:01:39.932466
# Ended at 17:01:40.209466
# Kraken Duration: 0.27699995040893555
# Kraken: {'error': [], 'result': {'XXRPZUSD': {'asks': [['0.49040000', '6126.300', 1522677710], ['0.49059000', '2100.963', 1522677703], ['0.49073000', '1996.000', 1522677712], ['0.49075000', '10513.886', 1522677700], ['0.49150000', '8759.980', 1522677703], ['0.49151000', '20211.394', 1522677700], ['0.49168000', '2010.000', 1522677658], ['0.49198000', '21633.000', 1522677702], ['0.49199000', '27000.000', 1522677669], ['0.49248000', '1100.000', 1522677713], ['0.49274000', '295.164', 1522677671], ['0.49296000', '55449.292', 1522677702], ['0.49330000', '900.000', 1522677610], ['0.49332000', '480.167', 1522677660], ['0.49397000', '39.470', 1522677093], ['0.49400000', '212.945', 1522677441], ['0.49414000', '3571.569', 1522674706], ['0.49432000', '41710.967', 1522677658], ['0.49435000', '216330.000', 1522677699], ['0.49512000', '30506.458', 1522677710], ['0.49513000', '33.324', 1522677229], ['0.49514000', '35.342', 1522677664], ['0.49543000', '1430.000', 1522674828], ['0.49574000', '200.000', 1522677642], ['0.49678000', '55.352', 1522677337], ['0.49679000', '39.246', 1522677689], ['0.49680000', '500.000', 1522676040], ['0.49746000', '33.167', 1522677489], ['0.49748000', '31.152', 1522677616], ['0.49841000', '39.122', 1522677673], ['0.49842000', '49.151', 1522677646], ['0.49843000', '33.103', 1522677631], ['0.49844000', '54.672', 1522677281], ['0.49877000', '5176.936', 1522670074], ['0.49900000', '132.571', 1522669945], ['0.49970000', '1000.000', 1522670640], ['0.50000000', '2378.000', 1522677164], ['0.50120000', '128192.493', 1522677703], ['0.50290000', '1000.000', 1522668612], ['0.50300000', '2299.784', 1522675970], ['0.50368000', '300.000', 1522668660], ['0.50469000', '805.520', 1522677008], ['0.50470000', '402.750', 1522676889], ['0.50488000', '60.000', 1522612517], ['0.50490000', '1000.000', 1522675568], ['0.50500000', '32920.000', 1522676000], ['0.50506000', '402.460', 1522676629], ['0.50526000', '402.310', 1522677071], ['0.50531000', '402.260', 1522676696], ['0.50540000', '23742.000', 1522668929]], 'bids': [['0.48994000', '200.000', 1522677511], ['0.48934000', '998.000', 1522677710], ['0.48933000', '10055.752', 1522677710], ['0.48932000', '13016.948', 1522677698], ['0.48881000', '2399.990', 1522677714], ['0.48860000', '18992.114', 1522677691], ['0.48814000', '1001.100', 1522677704], ['0.48806000', '5047.938', 1522677660], ['0.48743000', '200.000', 1522677307], ['0.48712000', '8759.980', 1522677704], ['0.48711000', '49088.545', 1522677706], ['0.48709000', '27000.000', 1522677669], ['0.48700000', '4167.360', 1522677350], ['0.48601000', '21633.000', 1522677691], ['0.48600000', '500.000', 1522672092], ['0.48567000', '41710.967', 1522677658], ['0.48515000', '855.000', 1522677131], ['0.48500000', '74.940', 1522677537], ['0.48308000', '35039.910', 1522677710], ['0.48307000', '216330.000', 1522677696], ['0.48301000', '15056.317', 1522677699], ['0.48300000', '5701.317', 1522675128], ['0.48285000', '514.131', 1522677705], ['0.48200000', '219.316', 1522665421], ['0.48010000', '1000.000', 1522673725], ['0.48001000', '1740.485', 1522673071], ['0.48000000', '1676.000', 1522671954], ['0.47890000', '80.000', 1522658194], ['0.47787000', '16315.957', 1522677714], ['0.47590000', '5011.000', 1522659180], ['0.47572000', '17800.000', 1522653376], ['0.47500000', '5074.500', 1522666398], ['0.47421000', '12700.000', 1522654204], ['0.47400000', '14800.000', 1522676896], ['0.47200000', '4315.000', 1522673557], ['0.47140000', '155.537', 1522651320], ['0.47100000', '1017.940', 1522651324], ['0.47010000', '4590.000', 1522651328], ['0.47000000', '8360.830', 1522677297], ['0.46900000', '105.000', 1522662390], ['0.46800000', '1000.000', 1522669730], ['0.46630000', '5000.000', 1522651343], ['0.46500000', '36160.871', 1522670828], ['0.46470000', '107.597', 1522651356], ['0.46300000', '64.795', 1522651371], ['0.46200000', '111912.555', 1522673712], ['0.46100000', '555.708', 1522651383], ['0.46000000', '35088.988', 1522677243], ['0.45800000', '762.000', 1522606241], ['0.45750000', '5901.640', 1522660880]]}}}

time.sleep(3)
print('#################################MULTIPROCESSING#################################')
from multiprocessing import Process
if __name__ == '__main__':
  p1 = Process(target=returnKrakenOrderBook(k_pair, 11))
  p2 = Process(target=returnKrakenOrderBook(k_pair, 12))
  p1.start()
  #p2 = Process(target=returnKrakenOrderBook(k_pair, 12))
  p2.start()
  p1.join()
  p2.join()